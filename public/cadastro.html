<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Cadastro | Cart√£o AproveitAI</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
  <style>
    .card-info {
      background: #f1fbff;
      padding: 20px;
      border-radius: 12px;
      max-width: 600px;
      margin: 0 auto 30px auto;
      box-shadow: 0 0 8px rgba(0,0,0,0.08);
    }
    .form-wrap {
      max-width: 600px;
      margin: 0 auto;
    }
    form label {
      display: block;
      margin-top: 12px;
      font-weight: bold;
    }
    form input[type="text"],
    form input[type="date"] {
      width: 100%;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 6px;
      margin-top: 4px;
    }
    form button {
      margin-top: 20px;
      display: block;
      width: 100%;
    }
    .checkbox-termo {
      margin-top: 20px;
    }
    .checkbox-termo label {
      display: inline;
      font-weight: normal;
    }
.aceite-termos {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-top: 20px;
  font-size: 0.95rem;
}

.aceite-termos input {
  width: 16px;
  height: 16px;
}
.btn-voltar-flutuante {
  position: fixed;
  bottom: 20px;
  left: 20px;
  z-index: 9999;
  background: #198754;
  color: #fff;
  border: none;
  border-radius: 50px;
  padding: 14px 18px;
  font-size: 16px;
  font-weight: bold;
  cursor: pointer;
  box-shadow: 0 4px 10px rgba(0,0,0,0.25);
}

.btn-voltar-flutuante:hover {
  background: #146c43;
}

  </style>
</head>

<body>
<iframe name="hiddenFrame" style="display:none;"></iframe>

<!-- ‚úÖ CABE√áALHO PADR√ÉO -->
<header class="site-header">
  <div class="brandline">
    <img src="logo-prometheus.png" class="logo logo-prometheus">
    <div class="brand-center">
      <h1 class="site-title">Cart√£o AproveitAI</h1>
      <p class="slogan">Tecnologia com Consci√™ncIA gera Resultado.</p>
      <p class="boas-vindas">
        üìù <strong>Quero ser Cliente</strong><br>
        Preencha o formul√°rio para solicitar seu cart√£o.
      </p>
    </div>
    <img src="logo-aproveitai.png" class="logo logo-aproveitai">
  </div>
</header>
<div style="
  background:#fff3cd;
  color:#856404;
  padding:8px;
  text-align:center;
  font-size:13px;
">
  ‚ö†Ô∏è Descontos sujeitos √† valida√ß√£o no sistema e √†s regras do parceiro.
</div>

<!-- ‚úÖ BLOCO EXPLICA√á√ÉO -->
<div class="card-info">
  <h2 style="color:#007f30; text-align:center;">üìã Como funciona o Cart√£o AproveitAI</h2>
  <p>O <strong>Cart√£o AproveitAI</strong> conecta voc√™ a com√©rcios e servi√ßos parceiros, oferecendo descontos reais e vantagens exclusivas.</p>
  <ol style="margin-top:10px;">
    <li>Preencha o cadastro e aceite os Termos de Ades√£o.</li>
    <li>Nossa equipe entrar√° em contato para confirmar o pagamento.</li>
    <li>Ap√≥s a confirma√ß√£o, voc√™ receber√° seu <strong>Cart√£o Digital AproveitAI</strong> com QR Code.</li>
    <li>Apresente o QR Code aos parceiros para obter descontos.</li>
  </ol>
  <p style="margin-top:10px;">üìô <strong>Valor individual:</strong> R$ 20,00/m√™s.</p>
  <p>üë• <strong>Grupos</strong> (empresas, associa√ß√µes, sindicatos, condom√≠nios) t√™m condi√ß√µes especiais.</p>
</div>

<!-- ‚úÖ FORMUL√ÅRIO -->
<div class="form-wrap">
<form
  id="formCadastro"
  action="https://script.google.com/macros/s/AKfycbzhwXhtWdsDSuABRneoz6QAD1SxpnMq3vc8e1FhtknlB7_1j6qLjYIbPA0qPJS7ck7y/exec"
  method="POST"
  target="hiddenFrame"
>
<!-- rastreio b√°sico -->
<input type="hidden" name="userAgent" value="">
<input type="hidden" name="origemAceite" value="cadastro_site">
<input type="hidden" name="ipAceite" value="NAO_DISPONIVEL">

  <label>Nome completo:</label>
  <input type="text" name="nome" required>

<label>CPF:</label>
<input
  type="text"
  name="cpf"
  placeholder="Somente n√∫meros"
  maxlength="11"
  pattern="\d{11}"
  inputmode="numeric"
  required
>

<label>Celular (WhatsApp):</label>
<input
  type="text"
  name="celular"
  placeholder="DDD + n√∫mero (ex: 28999990000)"
  maxlength="11"
  pattern="\d{10,11}"
  inputmode="numeric"
  required
>

<label>Cidade - Estado:</label>
<input
  type="text"
  name="cidade"
  placeholder="Ex: Munic√≠pio - UF"
  required
>

  <label>Grupo (empresa, sindicato ou particular):</label>
  <input type="text" name="grupo">

  <label>Data de nascimento:</label>
  <input
  type="date"
  id="nascimento"
  name="nascimento"
  required
>


  <!-- CAMPOS OCULTOS PARA BLINDAGEM -->
  <input type="hidden" name="origem" value="cadastro_site">

  <label class="aceite-termos">
    <input type="checkbox" name="aceite" value="SIM" required>
    <span>
      Li e aceito os 
      <a href="termos.html" target="_blank">Termos de Ades√£o</a> e 
      <a href="privacidade.html" target="_blank">Pol√≠tica de Privacidade</a>
    </span>
  </label>

  <button type="submit" class="btn-aproveitai">‚úÖ Enviar cadastro</button>
<input type="hidden" name="userAgent" id="userAgent">

</form>
  <div style="text-align:center; margin-top: 20px;">
    <a href="index.html" class="btn-aproveitai">‚Üê Voltar ao site</a>
  </div>
</div>

<!-- ‚úÖ RODAP√â PADR√ÉO -->
<footer style="
  background:#dfffe0;
  padding:12px;
  text-align:center;
  font-size:12px;
  line-height:1.4;
">
  ¬© 2025 Cart√£o AproveitAI ‚Ä¢ PROMETHEUS EROPRO<br>

  <strong>Aviso legal:</strong> O Cart√£o AproveitAI n√£o garante descontos.
  Benef√≠cios e promo√ß√µes s√£o definidos e concedidos exclusivamente pelos parceiros,
  v√°lidos, em regra, para pagamentos √† vista, salvo autoriza√ß√£o expressa do estabelecimento.
</footer>
<script>
const form = document.getElementById("formCadastro");

form.addEventListener("submit", async function (e) {
  e.preventDefault();

  const dados = new FormData(form);

 try {
  const resp = await fetch(form.action, {
    method: "POST",
    body: new FormData(form)
  });

  const data = await resp.json();

  if (data.erro === "CPF_JA_CADASTRADO") {
    localStorage.setItem("tipoCadastro", "ja_existente");
    window.location.href = "cadastro-sucesso.html";
    return;
  }

  if (data.erro === "CPF_INVALIDO") {
    alert("‚ùå CPF inv√°lido.");
    return;
  }

  if (data.ok) {
    localStorage.setItem("tipoCadastro", "novo");
    window.location.href = "cadastro-sucesso.html";
    return;
  }

  alert("‚ùå Erro inesperado no cadastro.");

} catch (err) {
  alert("‚ùå Erro inesperado. Tente novamente.");
}

});
</script>
</body>
</html>
