<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Meu Cart√£o | Cart√£o AproveitAI</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="#0a7f2e">

<style>
body{
  margin:0;
  font-family: Arial, sans-serif;
  background:#bfefff;
}

/* TARJA PADR√ÉO (RELAT√ìRIO + CART√ÉO) */
.tarja-padrao {
  background: linear-gradient(90deg, #0a7f2e, #1c8f3c);
  color: #fff;
  padding: 14px 20px;
  font-weight: 700;
  font-size: 18px;
  text-align: center;
  border-radius: 10px;
  margin: 20px auto;
  max-width: 1100px;
}
/* ===== CARD ===== */
.card{
  max-width:900px;
  margin:40px auto;
  background:#eaffea;
  padding:30px;
  border-radius:14px;
  border:2px dashed #1c8f3c;
  display:grid;
  grid-template-columns:2fr 1fr;
  gap:30px;
}

.card.inativo{
  background:#fdeaea;
  border-color:#d93025;
}

.info p{
  font-size:18px;
  margin:6px 0;
}

.info b{
  display:inline-block;
  min-width:160px;
}

/* ===== QR ===== */
.qr{text-align:center}

.qr img{width:140px}

.contato{
  font-size:13px;
  margin-top:14px;
}

/* ===== BOT√ïES ===== */
.actions{
  max-width:900px;
  margin:20px auto;
  display:flex;
  justify-content:center;
  gap:14px;
  flex-wrap:wrap;
}

.btn{
  background:#0a7f2e;
  color:#fff;
  border:none;
  border-radius:10px;
  padding:14px 22px;
  font-size:16px;
  font-weight:800;
  cursor:pointer;
}

/* ===== RODAP√â ===== */
.footer{
  background:#eaffea;
  border-top:4px solid #0a7f2e;
  margin-top:40px;
}

.footer-container{
  max-width:900px;
  margin:auto;
  padding:24px 16px;
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:20px;
}

.footer h3{color:#0a7f2e;margin-top:0}

.footer-bottom{
  background:#dff7e7;
  text-align:center;
  padding:12px;
  font-size:13px;
}
/* ===== CABE√áALHO PADR√ÉO ===== */
.site-header {
  background: #fff;
  text-align: center;
}

.header-top {
  display: grid;
  grid-template-columns: 140px 1fr 140px;
  align-items: center;
  padding: 20px;
  max-width: 1200px;
  margin: auto;
}

.logo-esq,
.logo-dir {
  max-height: 120px;
  object-fit: contain;
}

.header-centro h1 {
  margin: 0;
  font-size: 32px;
  color: #0a7f2e;
}

.slogan {
  margin: 6px 0 0;
  font-size: 15px;
  color: #333;
}


/* ===== CART√ÉO GRANDE ===== */
.cartao-grande {
  max-width: 1100px;
  margin: 40px auto;
  background: #eaffea;
  border: 3px dashed #1c8f3c;
  border-radius: 18px;
  padding: 30px;
}

.cartao-conteudo {
  display: flex;
  justify-content: space-between;
  gap: 40px;
}

.logo-cartao {
  max-width: 180px;
  margin-bottom: 20px;
}

.dados-cartao {
  flex: 2;
  font-size: 18px;
  line-height: 1.7;
}

.dados-cartao div {
  display: grid;
  grid-template-columns: 180px 1fr;
  margin-bottom: 6px;
}

.qr-cartao {
  flex: 1;
  text-align: center;
}

.qr-cartao img {
  width: 180px;
  height: 180px;
}
.acoes-cartao{
  display:flex;
  justify-content:center;
  gap:16px;
  margin:30px 0;
  flex-wrap:wrap;
}

.btn-acao{
  background:#0a7f2e;
  color:#fff;
  border:none;
  border-radius:10px;
  padding:14px 20px;
  font-size:16px;
  font-weight:700;
  cursor:pointer;
  min-width:220px;
}

.btn-acao:hover{
  background:#086426;
}

.btn-acao.voltar{
  background:#1f4fd8;
}

.btn-acao.voltar:hover{
  background:#173bb0;
}
@media print {
  body * {
    visibility: hidden;
  }
  #cartaoBox, #cartaoBox * {
    visibility: visible;
  }
  #cartaoBox {
    position: absolute;
    left: 0;
    top: 0;
    width: 100%;
  }
}
/* TARJA PADR√ÉO (RELAT√ìRIO + CART√ÉO) */
/* TARJA DO CART√ÉO DIGITAL */
.tarja-cartao {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 20px;

  background-color: #e9fff0; /* verde-√°gua igual ao fundo do cart√£o */
  border: 2px solid #0a7f2e;

  padding: 14px 20px;
  margin: 20px auto;
  max-width: 1200px;
  border-radius: 14px;
}

/* Logos da tarja */
.logo-tarja {
  width: 190px;
  max-height: 90px;
  object-fit: contain;
}

/* Texto central */
.titulo-tarja {
  flex: 1;
  text-align: center;
  font-size: 20px;
  font-weight: 700;
  color: #0a7f2e;
}
/* CABE√áALHO DO CART√ÉO */
.cabecalho-cartao {
  display: flex;
  align-items: center;
  justify-content: space-between;

  max-width: 1200px;
  margin: 20px auto;
  padding: 0 10px;
}

/* Logos nos cantos */
.logo-cabecalho {
  width: 190px;
  max-height: 90px;
  object-fit: contain;
}

/* Tarja central */
.tarja-central {
  flex: 1;
  margin: 0 20px;

  background-color: #e9fff0; /* verde-√°gua */
  border: 2px solid #0a7f2e;
  border-radius: 14px;

  text-align: center;
  padding: 12px 10px;

  font-size: 20px;
  font-weight: 700;
  color: #0a7f2e;
}
/* =========================
   CABE√áALHO
========================= */
.site-header {
  background: white;
  padding: 10px;
  box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}

.brandline {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 15px;
  flex-wrap: wrap;
}

.logo {
  max-height: 180px;
  height: auto;
  width: auto;
  object-fit: contain;
}

.brand-center {
  flex: 1;
  text-align: center;
}

.site-title {
  font-size: 36px;
  color: #0a7a2a;
  text-shadow: 1px 1px 3px rgba(0,0,0,0.3);
  font-weight: bold;
}

.slogan {
  font-size: 16px;
  font-style: italic;
  margin-bottom: 5px;
  color: #555;
}

.boas-vindas {
  background: #dfffe0;
  padding: 12px 15px;
  border-radius: 8px;
  margin-top: 10px;
  font-size: 18px; /* AUMENTADO */
  line-height: 1.5;
  font-weight: 600;
  box-shadow: 0 1px 3px rgba(0,0,0,0.08);
}
/* =========================
   RODAP√â
========================= */
.footer {
  background: #dfffe0;
  color: #222;
  padding: 10px 10px;
  font-size: 13px;
  border-top: 3px solid white;
}

.footer-container {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  align-items: flex-start;
  gap: 10px;
  max-width: 1000px;
  margin: auto;
  padding: 5px 0;
}

.footer a {
  color: #0066cc;
  font-size: 13px;
}

.footer-bottom {
  text-align: center;
  margin-top: 5px;
  font-size: 11px;
}


</style>
</head>

<body>
<header class="site-header">
<!-- ‚úÖ CABE√áALHO PADRONIZADO -->
<header class="site-header">
  <div class="brandline">
    <img src="logo-prometheus.png" class="logo logo-prometheus">
    <div class="brand-center">
      <h1 class="site-title">Cart√£o AproveitAI</h1>
      <p class="slogan">Tecnologia com Consci√™ncIA gera Resultado.</p>

      <!-- Tarja -->
      <p class="boas-vindas">
        üì£ <strong> Meu Cart√£o Digital><br>
        Com seu Cart√£o voc√™ economiza comprando.
      </p>
    </div>
    <img src="logo-aproveitai.png" class="logo logo-aproveitai">
  </div>
</header>

<div class="cartao-grande" id="cartaoBox">
  <div class="cartao-conteudo">

    <div class="dados-cartao">
      <img src="logo-aproveitai.png" class="logo-cartao">

      <div><b>Nome:</b> <span id="nome">-</span></div>
      <div><b>CPF:</b> <span id="cpf">-</span></div>
      <div><b>ID P√∫blico:</b> <span id="idPublico">-</span></div>
      <div><b>Grupo:</b> <span id="grupo">-</span></div>
      <div><b>Cidade:</b> <span id="cidade">-</span></div>
      <div><b>Data de Cadastro:</b> <span id="dataAceite">-</span></div>
      <div><b>Status:</b> <span id="status">-</span></div>
    </div>

    <div class="qr-cartao">
      <div class="qr-titulo">Valida√ß√£o</div>
      <img id="qrImg">
      <div class="qr-texto">Aponte a c√¢mera para validar</div>

      <div class="suporte">
        Suporte: (28) 99969-2303<br>
        cartao.aproveitai@gmail.com<br>
        www.aproveitai.com.br
      </div>
    </div>
  </div>
</div>
<div class="acoes-cartao">
  <button class="btn-acao" onclick="imprimirCartao()">
    üñ®Ô∏è Imprimir / Salvar
  </button>

  <button class="btn-acao" onclick="salvarNoCelular()">
    üì≤ Salvar no celular
  </button>

  <button class="btn-acao voltar" onclick="voltar()">
    ‚¨ÖÔ∏è Voltar
  </button>
</div>
<!-- ‚úÖ RODAP√â PADR√ÉO -->
<footer class="footer">
  <div class="footer-container">
    <div>
      <h3>Cart√£o AproveitAI</h3>
      PROMETHEUS EROPRO Solu√ß√µes Inteligentes LTDA<br>
      CNPJ: 58.584.332/0001-40<br>
      üìß cartao.aproveitai@gmail.com<br>
      üìû (28) 99969-2303<br>
      üì∏ @cartao.aproveitai
    </div>
    <div>
      <h3>Links R√°pidos</h3>
      <a href="faq.html">D√∫vidas Frequentes</a><br>
      <a href="privacidade.html">Pol√≠tica de Privacidade</a><br>
      <a href="cookies.html">Pol√≠tica de Cookies</a><br>
      <a href="consentimento.html">Termo de Consentimento</a><br>
      <a href="termos.html">Termos de Uso</a><br>
      <a href="excluir.html">Excluir meus dados</a>
    </div>
  </div>
  <div class="footer-bottom">
    ¬© 2025 AproveitAI. Todos os direitos reservados.
  </div>
</footer><script>
/* ===============================
   CONFIGURA√á√ÉO DA API
================================ */
const API_URL = "https://script.google.com/macros/s/AKfycbzhwXhtWdsDSuABRneoz6QAD1SxpnMq3vc8e1FhtknlB7_1j6qLjYIbPA0qPJS7ck7y/exec";

/* ===============================
   UTILIT√ÅRIOS
================================ */
function getParam(nome) {
  return new URLSearchParams(window.location.search).get(nome);
}

function normalizar(v){
  return String(v || "").toLowerCase().trim();
}

function isAtivo(v){
  return ["sim","ativo","true","1"].includes(normalizar(v));
}

/* ===============================
   A√á√ïES DOS BOT√ïES
================================ */
function voltar(){
  history.back();
}

function imprimirCartao(){
  window.print();
}

function salvarNoCelular(){
  imprimirCartao(); // no celular abre salvar PDF
}

/* ===============================
   CARREGAR CART√ÉO
================================ */
async function carregarCartao(){
  const id = getParam("id");
  if(!id){
    document.getElementById("status").innerText = "ID n√£o informado";
    return;
  }

  try{
    const res = await fetch(`${API_URL}?aba=clientes&idPublico=${encodeURIComponent(id)}`);
    const data = await res.json();

    const c = Array.isArray(data)
      ? data.find(x => String(x.idPublico).trim() === id)
      : data;

    if(!c){
      document.getElementById("status").innerText = "Cart√£o n√£o encontrado";
      return;
    }

    document.getElementById("nome").innerText = c.nome || "-";
    document.getElementById("cpf").innerText = c.cpf || "-";
    document.getElementById("idPublico").innerText = c.idPublico || "-";
    document.getElementById("grupo").innerText = c.grupo || "-";
    document.getElementById("cidade").innerText = c.cidade || "-";
    document.getElementById("dataAceite").innerText = c.dataAceite || "-";
    document.getElementById("status").innerText = isAtivo(c.ativo) ? "ATIVO" : "INATIVO";

    // QR Code
    const urlValidacao = `${location.origin}/validar.html?id=${c.idPublico}`;
    document.getElementById("qrImg").src =
      `https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(urlValidacao)}`;

    // visual ativo/inativo
    const box = document.getElementById("cartaoBox");
    box.classList.add(isAtivo(c.ativo) ? "ativo" : "inativo");

  }catch(e){
    console.error(e);
    document.getElementById("status").innerText = "Erro ao carregar cart√£o";
  }
}

/* ===============================
   INICIAR
================================ */
window.onload = carregarCartao;
</script>

</body>
</html>
