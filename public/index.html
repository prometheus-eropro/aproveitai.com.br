<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Plataforma AproveitAI</title>
<link rel="stylesheet" href="style.css">


<link rel="apple-touch-icon" href="logo-aproveitai.png">

  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  

<meta name="theme-color" content="#0a7a2a">


</head>

<body>

<header class="site-header">
  <div class="brandline">
    <img src="logo-prometheus.png" class="logo logo-prometheus">
    <div class="brand-center">
      <h1 class="site-title">Plataforma AproveitAI</h1>
      <p class="slogan">Tecnologia com Consci√™ncIA gera Resultado.</p>
      <p class="boas-vindas">
        Bem-vindo √† <strong>PROMETHEUS EROPRO Solu√ß√µes Inteligentes</strong><br>
        Assine e comece a economizar de verdade.
      </p>
    </div>
    <img src="logo-aproveitai.png" class="logo logo-aproveitai">
  </div>
</header>
<div style="
  background:#fff3cd;
  color:#856404;
  padding:8px;
  text-align:center;
  font-size:13px;
">
  ‚ö†Ô∏è Descontos sujeitos √† valida√ß√£o no sistema e √†s regras do parceiro.
</div>

<!-- BOT√ïES PRINCIPAIS -->
<div class="botoes-centrais">
  <a href="beneficios.html" class="btn-aproveitai">üéÅ Benef√≠cios</a>
  <a href="promocoes.html" class="btn-aproveitai">üî• Promo√ß√µes</a>
  <a href="painelcliente.html" class="btn-aproveitai">üë§ √Årea do Cliente</a>
  <a href="painelparceiro.html" class="btn-aproveitai">üè™ √Årea do Parceiro</a>
<a
  href="https://api.whatsapp.com/send?phone=5528999692303&text=Ol√°!%20Quero%20ser%20parceiro%20do%20Cart√£o%20AproveitAI.%0A%0ANome%20do%20neg√≥cio:%0ACidade:%0ARamo:%0ATelefone:%0AInstagram:%0A%0AObrigado!"
  target="_blank"
  class="btn-aproveitai"
>
  üè™ Quero ser parceiro
</a>
<a href="cadastro.html" class="btn-aproveitai">
  üè™ Quero ser cliente
</a>

</div>


<div class="filtros">
  <input type="text" id="buscaNome" placeholder="Buscar por nome">
  <select id="buscaCidade"><option value="">Todas as cidades</option></select>
  <select id="buscaRamo"><option value="">Todos os ramos</option></select>
  <button onclick="filtrar()">Filtrar</button>
</div>

<div class="cards-wrapper">
  <div id="parceiros" class="container-parceiros">

  </div>
</div>

<div class="separador-footer"></div>
<div style="
  background:#fff3cd;
  color:#856404;
  padding:10px;
  text-align:center;
  font-size:13px;
">
  ‚ö†Ô∏è Aviso legal: A Plataforma AproveitAI n√£o garante descontos.
  Benef√≠cios e promo√ß√µes s√£o definidos exclusivamente pelos parceiros
  e v√°lidos, em regra, para pagamentos √† vista em moeda corrente, salvo autoriza√ß√£o do estabelecimento.
</div>

<!-- ‚úÖ RODAP√â PADR√ÉO -->
<footer class="footer">
  <div class="footer-container">
    <div>
      <h3>Plataforma AproveitAI</h3>
      PROMETHEUS EROPRO Solu√ß√µes Inteligentes LTDA<br>
      CNPJ: 58.584.332/0001-40<br>
      üìß cartao.aproveitai@gmail.com<br>
      üìû (28) 99969-2303<br>
      üì∏ @cartao.aproveitai
<a href="/admin.html" style="opacity:0; position:fixed; bottom:5px; right:5px; width:20px; height:20px;">.</a>
   

 </div>
    <div>
      <h3>Links R√°pidos</h3>
      <a href="faq.html">D√∫vidas Frequentes</a><br>
      <a href="privacidade.html">Pol√≠tica de Privacidade</a><br>
      <a href="cookies.html">Pol√≠tica de Cookies</a><br>
      <a href="consentimento.html">Termo de Consentimento</a><br>
      <a href="termos.html">Termos de Uso</a><br>
      <a href="excluir.html">Excluir meus dados</a>

    </div>
  </div>
    ¬© 2025 AproveitAI. Todos os direitos reservados.
  </div>
</footer>

<script>
/* =====================================================
   Plataforma APROVEITAI ‚Äì SCRIPT √öNICO OFICIAL (INDEX)
===================================================== */

 const API_URL = "https://script.google.com/macros/s/AKfycbzhwXhtWdsDSuABRneoz6QAD1SxpnMq3vc8e1FhtknlB7_1j6qLjYIbPA0qPJS7ck7y/exec";

const parceirosDiv = document.getElementById("parceiros");
const buscaNome = document.getElementById("buscaNome");
const buscaCidade = document.getElementById("buscaCidade");
const buscaRamo = document.getElementById("buscaRamo");

let parceiros = [];

/* =========================
   UTIL
========================= */
function normalizar(txt) {
  return (txt || "")
    .toLowerCase()
    .normalize("NFD")
    .replace(/[\u0300-\u036f]/g, "")
    .trim();
}

/* =========================
   PREENCHER FILTROS
========================= */
function preencherFiltros() {
  buscaCidade.innerHTML = `<option value="">Todas as cidades</option>`;
  buscaRamo.innerHTML = `<option value="">Todos os ramos</option>`;

  [...new Set(parceiros.map(p => normalizar(p.cidade)).filter(Boolean))]
    .sort()
    .forEach(c => {
      buscaCidade.innerHTML += `<option value="${c}">${c}</option>`;
    });

  [...new Set(parceiros.map(p => normalizar(p.ramo)).filter(Boolean))]
    .sort()
    .forEach(r => {
      buscaRamo.innerHTML += `<option value="${r}">${r}</option>`;
    });
}

/* =========================
   RENDERIZAR CARDS
========================= */
function renderizar(lista) {
  parceirosDiv.innerHTML = "";

  if (!lista.length) {
    parceirosDiv.innerHTML = "<p>Nenhum parceiro encontrado.</p>";
    return;
  }

  lista.forEach(p => {
    if (String(p.ativo).toLowerCase() !== "sim") return;

    const nome = p.nomeFantasia || p.nome || "Parceiro";
const cidade = p.cidade || "-";
const ramo = p.ramo || "-";
const desconto = p.tipoDesconto || "";

const whatsapp = String(p.whatsapp || "").replace(/\D/g, "");
const instagram = String(p.instagram || "");
const site = String(p.site || "");
const email = String(p.email || "");
const maps = String(p.link_maps || "");


let logo = String(p.logoURL || "").trim();

if (logo.includes("drive.google.com")) {
  const match = logo.match(/[-\w]{25,}/);
  if (match) {
    logo = "https://drive.google.com/uc?export=view&id=" + match[0];
  }
}

if (!logo.startsWith("http")) {
  logo = "logo-aproveitai.png";
}

    parceirosDiv.innerHTML += `
      <div class="card">
        <img src="${logo}" onerror="this.src='logo-aproveitai.png'" style="max-height:100px;margin-bottom:10px">
        <h3>${nome}</h3>
        <p><b>Cidade:</b> ${cidade}</p>
        <p><b>Ramo:</b> ${ramo}</p>
        ${desconto ? `<p><b>Desconto:</b> ${desconto}</p>` : ""}

        <div class="card-contatos-texto">
          ${whatsapp ? `<a class="tag-contato tag-whatsapp" target="_blank" href="https://wa.me/55${whatsapp}">WhatsApp</a>` : ""}
          ${instagram ? `<a class="tag-contato tag-instagram" target="_blank" href="https://instagram.com/${instagram.replace("@","")}">Instagram</a>` : ""}
          ${site ? `<a class="tag-contato tag-site" target="_blank" href="${site}">Site</a>` : ""}
          ${email ? `<a class="tag-contato tag-email" href="mailto:${email}">E-mail</a>` : ""}
          ${maps ? `<a href="${maps}" target="_blank">üìç Como chegar</a>` : ""}

        </div>
      </div>
    `;
  });
}

/* =========================
   FILTRAR
========================= */
function filtrar() {
  const nome = normalizar(buscaNome.value);
  const cidade = normalizar(buscaCidade.value);
  const ramo = normalizar(buscaRamo.value);

  const filtrados = parceiros.filter(p =>
    (!nome || normalizar(p.nomeFantasia || p.nome).includes(nome)) &&
    (!cidade || normalizar(p.cidade).includes(cidade)) &&
    (!ramo || normalizar(p.ramo).includes(ramo))
  );

  renderizar(filtrados);
}

/* =========================
   CARREGAR PARCEIROS
========================= */


function carregarParceiros() {
  fetch(API_URL + "?aba=parceiros")
    .then(r => r.json())
    .then(res => {
      console.log("Resposta da API:", res);

      parceiros = res.dados || res;

      if (!Array.isArray(parceiros)) {
        throw new Error("Formato inesperado da API");
      }

      preencherFiltros();
      renderizar(parceiros);
    })
    .catch(err => {
      console.error("Erro ao carregar parceiros:", err);
      parceirosDiv.innerHTML = "<p>Erro ao carregar parceiros.</p>";
    });
}

function distanciaKm(lat1, lon1, lat2, lon2){
  const R = 6371;
  const dLat = (lat2-lat1)*Math.PI/180;
  const dLon = (lon2-lon1)*Math.PI/180;
  const a =
    Math.sin(dLat/2)**2 +
    Math.cos(lat1*Math.PI/180)*Math.cos(lat2*Math.PI/180)*
    Math.sin(dLon/2)**2;
  return (R * (2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)))).toFixed(1);
}


document.addEventListener("DOMContentLoaded", carregarParceiros);

</script>
</body>
</html>
