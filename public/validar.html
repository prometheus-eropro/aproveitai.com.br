<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Valida√ß√£o por QR Code ‚Ä¢ Cart√£o AproveitAI</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    body {
      font-family: "Segoe UI", Arial, sans-serif;
      background-color: #f8fdf9;
      margin: 0;
      padding: 0;
    }
    header {
      text-align: center;
      padding: 20px;
      background-color: #fff;
      border-bottom: 4px solid #008000;
    }
    h1 {
      color: #008000;
      margin-bottom: 4px;
    }
    h2 {
      font-size: 20px;
      margin-top: 0;
      color: #333;
    }
    #reader {
      width: 320px;
      margin: 30px auto;
      background: #fff;
      border: 2px dashed #008000;
      border-radius: 12px;
      padding: 10px;
    }
    #status {
      text-align: center;
      font-size: 16px;
      margin-top: 20px;
    }
    footer {
      background-color: #e6ffe6;
      text-align: center;
      font-size: 14px;
      padding: 20px 10px;
      margin-top: 50px;
      color: #333;
    }
    a {
      text-decoration: none;
    }
  </style>
</head>

<body>
  <!-- ‚úÖ CABE√áALHO PADRONIZADO -->
<header class="site-header">
  <div class="brandline">
    <img src="logo-prometheus.png" class="logo logo-prometheus">
    <div class="brand-center">
      <h1 class="site-title">Cart√£o AproveitAI</h1>
      <p class="slogan">Tecnologia com Consci√™ncIA gera Resultado.</p>

      <!-- Tarja -->
      <p class="boas-vindas">
        üè™ <strong>√Årea do Parceiro</strong><br>
        VALIDADOR DE QRCODEe.
      </p>
    </div>
    <img src="logo-aproveitai.png" class="logo logo-aproveitai">
  </div>
</header>


  <main id="conteudo-principal" style="text-align:center;">
    <div id="reader"></div>
    <div id="status">Aponte a c√¢mera para o QR Code do cliente.</div>
  </main>

<!-- ‚úÖ RODAP√â PADR√ÉO -->
<footer class="footer">
  <div class="footer-container">
    <div>
      <h3>Cart√£o AproveitAI</h3>
      PROMETHEUS EROPRO Solu√ß√µes Inteligentes LTDA<br>
      CNPJ: 58.584.332/0001-40<br>
      üìß cartao.aproveitai@gmail.com<br>
      üìû (28) 99969-2303<br>
      üì∏ @cartao.aproveitai
    </div>
    <div>
      <h3>Links R√°pidos</h3>
      <a href="faq.html">D√∫vidas Frequentes</a><br>
      <a href="privacidade.html">Pol√≠tica de Privacidade</a><br>
      <a href="cookies.html">Pol√≠tica de Cookies</a><br>
      <a href="consentimento.html">Termo de Consentimento</a><br>
      <a href="termos.html">Termos de Uso</a><br>
      <a href="excluir.html">Excluir meus dados</a>
    </div>
  </div>
  <div class="footer-bottom">
    ¬© 2025 AproveitAI. Todos os direitos reservados.
  </div>
</footer>

<!-- LIB HTML5 QR CODE (OBRIGAT√ìRIA) -->
<!-- LIB HTML5 QR CODE -->
<script src="https://unpkg.com/html5-qrcode@2.3.8/html5-qrcode.min.js"></script>
<!-- HTML5 QR Code -->
<script src="https://unpkg.com/html5-qrcode@2.3.8/html5-qrcode.min.js"></script>

<script>
/* ======================================================
   VALIDADOR QR CODE ‚Äì APROVEITAI (VERS√ÉO EST√ÅVEL)
   ====================================================== */

/* üîí BLOQUEIO DE ACESSO */
const parceiroNome = sessionStorage.getItem("parceiroNome");

if (!parceiroNome) {
  document.getElementById("conteudo-principal").innerHTML = `
    <div style="padding:40px;text-align:center">
      <h3>‚ö†Ô∏è Acesso restrito</h3>
      <p>Este validador s√≥ pode ser acessado pela √Årea do Parceiro.</p>
      <a href="painelparceiro.html" style="color:green;font-weight:bold">
        üëâ Ir para √Årea do Parceiro
      </a>
    </div>
  `;
  throw new Error("Parceiro n√£o autenticado");
}

/* ======================================================
   INICIAR SCANNER
   ====================================================== */
const qrCodeScanner = new Html5Qrcode("reader");

function iniciarScanner() {
  qrCodeScanner.start(
    { facingMode: "environment" }, // üëà FOR√áA C√ÇMERA
    {
      fps: 10,
      qrbox: 250
    },
    onScanSuccess,
    onScanError
  ).catch(err => {
    console.error("Erro ao acessar c√¢mera:", err);
    alert("Erro ao acessar a c√¢mera. Verifique permiss√µes do navegador.");
  });
}

/* ======================================================
   CALLBACKS
   ====================================================== */
function onScanSuccess(decodedText) {
  qrCodeScanner.stop();
  window.location.href = "resultado.html?id=" + encodeURIComponent(decodedText);
}

function onScanError(error) {
  // silencioso (evita spam no console)
}

/* ======================================================
   START
   ====================================================== */
window.addEventListener("load", iniciarScanner);
</script>
</body>
</html>
